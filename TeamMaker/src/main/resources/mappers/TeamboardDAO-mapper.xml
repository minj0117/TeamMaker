<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.TeamboardDAO-mapper">
	
	<!-- 팀 게시판 리스트 -->
	<select id="boardList" resultType="com.kh.prj.teamboard.vo.TeamboardVO">
		<![CDATA[
			select LEVEL, 
   				 bno,cnt,b_comment,writer,parent,
    			 LPAD(' ', 4*(LEVEL-1)) || title title,
    			 cdate,
    			 tno
    			 from teamboard
    			 where tno = #{tno}
    			 START WITH parent=0
    			 CONNECT BY PRIOR bno=parent
    			 ORDER SIBLINGS BY bno desc
		]]>
	</select>
	
	<select id="boardView" resultType="com.kh.prj.teamboard.vo.TeamboardVO">
		select bno,cnt,title,b_comment,writer,parent,cdate,tno from teamboard where bno = #{bno}
	</select>
	
	<!-- 원글쓰기 -->
	<select id="boardWrite" parameterType="com.kh.prj.teamboard.vo.TeamboardVO">
		insert into teamboard (bno,title,b_comment,writer,tno) 
		values (teamboard_seq.nextval, #{title},#{b_comment},#{writer},${tno})
	</select>
	
	<select id="boardDelete" parameterType="int">
		delete teamboard where bno = #{bno}
	</select>
	
	<update id="boardMod" parameterType="com.kh.prj.teamboard.vo.TeamboardVO">
		update teamboard set title = #{title}, b_comment = #{b_comment} where bno = #{bno}
	</update>
</mapper>