<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.MemberDAO-mapper">
	<!-- 회원가입 -->
	<insert id="joinMember" parameterType="com.kh.prj.member.vo.MemberVO">	
		insert into member (id, pw, name, birth, gender, phone, email, free) 
		values (#{id},#{pw},#{name},#{birth},#{gender},#{phone},#{email},#{free})
	</insert>
	
	<!-- ID조회 -->
	<select id="listId" resultType="com.kh.prj.member.vo.MemberVO">
		select id, pw, name,birth,gender,phone,email, free,cdate 
		from member 
		where id = #{id} 
	</select>
	
	<!-- 회원 리스트 -->
	<select id="memberList" resultType="com.kh.prj.member.vo.MemberVO">
		select id, name, birth, gender, phone, email, free
		from member
	</select>
	
	<!-- 회원 수정 -->
	<update id="modifyMember" parameterType="com.kh.prj.member.vo.MemberVO">
		update member 
    	   set pw = #{pw},
    	   	   phone = #{phone}, 
        	   email = #{email},
        	   free = #{free}
    	 where id = #{id}
    	   and pw = #{pw}
	</update>
	
	<!-- 아이디 체크 -->
	<select id="idCheck" parameterType="String" resultType="int">
		select count(id)
		from member
		where id = #{id}
	</select>
	
	<select id="findId" parameterType="com.kh.prj.member.vo.MemberVO" resultType="String">
		select id 
		from member 
		where name = #{name} and email = #{email}
	</select>
	
	<select id="findPw" parameterType="com.kh.prj.member.vo.MemberVO" resultType="String">
		select pw 
		from member 
		where id = #{id} and email = #{email}
	</select>
	
	<select id="dancnt" parameterType="String" resultType="int">
	update member set dancntnumber = dancntnumber + 1 where id = #{id};
	</select>
</mapper>