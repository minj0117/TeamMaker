<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.TeamboardDAO-mapper">
	<!-- 팀 게시글 조회 -->
	<select id="tboardlist" parameterType="int" resultType="com.kh.prj.teamboard.vo.TeamboardVO">
		select btitle, bwriter, bcdate ,bno, cnt from teamboard where tno = #{tno} order by bno desc
	</select>
	
	<!-- 게시글 상제 조회 -->
	<select id="tboarddetail" parameterType="int" resultType="com.kh.prj.teamboard.vo.TeamboardVO">
		select btitle , bwriter , bcontent , cnt from teamboard where bno = #{bno}
	</select>
	
	<!-- 조회수 증가 -->
	<update id="tboardcnt" parameterType="int">
		update teamboard set cnt = cnt + 1 where bno = #{bno}
	</update>
	<!-- 원글 작성 -->
	<insert id="write" parameterType="com.kh.prj.teamboard.vo.TeamboardVO">
		insert into teamboard 
		(bno,btitle,bcontent,bwriter,groupno,grouprd,indent,tno,bpw) values
		(teamboard_bno.nextval,#{btitle},#{bcontent},#{bwriter},teamboard_groupno.nextval,0,0,#{tno},#{bpw})
	</insert>
	
	<!-- 댓글 조회-->
	<select id="showreply" parameterType="int" resultType="com.kh.prj.teamboard.vo.TeamboardReplyVO">
		select rwriter, rcontent,rcdate from tboardreply where bno = #{bno} order by rno asc
	</select>
	
	<!-- 댓글 작성 -->
	<insert id="writeReply" parameterType="com.kh.prj.teamboard.vo.TeamboardReplyVO">
		insert into tboardreply (rno,bno,rwriter,rcontent,rpw) 
		values (tboardreply_seq.nextval,#{bno},#{rwriter},#{rcontent},#{rpw})
	</insert>
	
	<update id="modifyReply" parameterType="com.kh.prj.teamboard.vo.TeamboardReplyVO">
		update tboardreply set rcontent = #{rcontent} where rno = #{rno};
	</update>
</mapper>