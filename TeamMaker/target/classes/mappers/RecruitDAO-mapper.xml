<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mappers.RecruitDAO-mapper">
	<!-- 글 리스트 조회 -->
	<select id="listRboard" resultType="com.kh.prj.recruit.vo.RecruitVO">
		<!-- select * from recruit order by rno desc -->
		<![CDATA[
		SELECT rno,id,rtitle,rcdate,rcnt
			FROM	(SELECT /*+INDEX_DESC(recruit recruit_pk) */
						rownum rn, rno, rtitle, id, rcdate, rcnt 
					from recruit where rownum <= #{pageNum} * #{amount})
			where rn > (#{pageNum}-1) * #{amount}
			ORDER BY rno DESC
		]]>
	</select>
	
	<select id="list" resultType="com.kh.prj.recruit.vo.RecruitVO">
		select * from recruit order by rno desc
	</select>
	
	
	<!-- 게시글 작성 -->
	<insert id="insertRboard" parameterType="com.kh.prj.recruit.vo.RecruitVO">
		insert into recruit (rno, id, rtitle, rpw, ronoff, rcategory, rcomment, rregion, rgroup, rstep, rindent )
		values(recruit_seq.nextval,#{id}, #{rtitle}, #{rpw}, #{ronoff}, #{rcategory}, #{rcomment}, #{rregion}, recruit_seq.currval,0,0)
	</insert>
	
	<!-- 게시글 보기 -->
	<select id="viewRboard" resultType="com.kh.prj.recruit.vo.RecruitVO">
		select * from recruit where rno = #{rno}
	</select>
	
	<!-- 조회수 증가 -->
	<update id="viewCntPlus" parameterType="com.kh.prj.recruit.vo.RecruitVO">
		update recruit set rcnt = rcnt + 1 where rno = #{rno}
	</update>
	
	<select id="getTotalCnt" resultType="int">
		select count(*) from recruit
	</select>
	
</mapper>